
---

# KEEPro - 运动记录截图生成器 (HEU定制版)

**KEEPro** 是一个基于 Web 的高保真运动记录生成工具。它允许用户自定义各项运动数据、通过算法随机生成跑步轨迹、手绘路径或使用预设地图，并最终生成与原生 App 极其相似的截图。

本项目在原有基础上进行了深度优化，加入了 Python 后端算法生成轨迹、IndexedDB 本地存储等特性。

## 🌟 在线演示
**[点击进入 Demo](https://lin-y-mag.github.io/HEU-keep/keep.html)**

---

## 🚀 核心功能详解

通过对源代码的分析，本项目包含以下详细功能：

### 1. 高保真 UI 还原 (`css/styles.css`)
*   **像素级复刻**：严格按照 Keep App 的 UI 规范编写 CSS，包括字体（DINCond-Bold）、字号、颜色、阴影和布局。
*   **自适应预览**：左侧实时预览生成效果，右侧为控制面板，支持移动端和桌面端访问。
*   **动态背景**：支持 CSS 滤镜和动态渐变背景效果。

### 2. 强大的轨迹生成系统
该项目提供三种方式来生成跑步轨迹：
*   **🐍 后端算法生成 (`Json2Png.py`)**：
    *   基于 Python Flask 的后端 API。
    *   使用 `numpy` 和 `matplotlib` 算法模拟真实的 400m 操场跑圈轨迹。
    *   包含随机扰动、椭圆拟合、旋转角度、进出场“多余线条”模拟，使轨迹看起来更像真实的 GPS 记录。
*   **✍️ 手动绘制 (`keep.html` Canvas)**：
    *   提供 HTML5 Canvas 画布，允许用户用鼠标或手指在地图上手绘任意路径。
*   **📁 预设与上传**：
    *   内置多条预设路径。
    *   支持从 JSON 文件加载轨迹数据。

### 3. 全面的数据自定义 (`keep.html`)
*   **个人信息**：自定义头像、用户名、运动标题（如“户外跑步”）。
*   **运动数据**：
    *   **里程 (km)**：支持设置显示值，以及“随机范围”（最小值~最大值）以微调生成结果。
    *   **配速**：支持设置显示配速，同样支持随机范围波动。
    *   **消耗**：自定义卡路里、运动时长（年/月/日/时/分）。
*   **环境数据**：
    *   **天气**：支持手动选择（晴/多云/阴）或自动获取。
    *   **温湿度**：手动输入温度和湿度，代码中预留了 API 自动获取接口。

### 4. 地图与场景定制
*   **HEU 专属地图**：内置哈尔滨工程大学特定地点（南体育场、军工操场、北体育场）的卫星地图底图。
*   **自定义底图**：支持用户上传本地图片作为背景地图。
*   **轨迹特效**：
    *   **渐变色路径**：支持开启/关闭轨迹渐变色，模拟跑步时的配速变化（颜色深浅）。
    *   **变色控制**：可自定义变色概率和步长范围。

### 5. 本地持久化存储 (`js/indexedDB.js`)
*   使用浏览器原生的 **IndexedDB** 数据库。
*   **自动保存**：点击保存后，用户的头像、用户名、历史设置等信息会永久保存在本地浏览器中，刷新页面不丢失，无需重复输入。

### 6. 图片导出
*   利用 `html2canvas` 技术将 DOM 节点渲染为图片。
*   支持一键生成并下载高分辨率 PNG 截图。

---

## 🛠️ 技术栈

*   **前端**：HTML5, CSS3 (Flexbox/Grid), JavaScript (原生 ES6+).
*   **后端**：Python 3, Flask, Numpy, Matplotlib (用于轨迹坐标计算).
*   **存储**：IndexedDB (前端本地存储).
*   **工具库**：html2canvas, Flask-CORS.

---

## 🔧 本地部署指南

### 1. 后端环境 (Python)
用于生成随机轨迹 API。

```bash
# 安装依赖
pip install numpy matplotlib flask flask_cors

# 启动服务
python HEU-keep-master/Json2Png.py
# 服务默认运行在 http://127.0.0.1:5000/generate-track
```

### 2. 前端环境
*   将项目根目录部署到任意 Web 服务器 (Nginx, Apache, 或 VS Code Live Server)。
*   打开 `keep.html` 即可使用。
*   *注意：如果后端在本地运行，需确保前端代码中的 API 请求地址指向本地地址。*

---

## ⚠️ 免责声明

本工具仅供编程学习、前端布局研究及界面设计交流使用。**请勿用于任何形式的虚假打卡、欺骗行为或商业用途。** 使用本工具产生的任何后果由使用者自行承担。

---

## 📜 项目历程与致谢

*   **Origin**: [@jimaske](https://gitee.com/jimaske/njupt-keep)
*   **Update v2**: [@fyhb](https://gitee.com/fyhb/keep)
*   **Current (HEU Ver)**: [@joyition](https://gitee.com/joytion/keep)

感谢以上开发者的开源贡献。