<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>截图生成</title>
    <style>
        @font-face {
            font-family: 'keeprun';
            src: url(./DINCond-Bold.otf);
        }
        
        html,
        body {
            width: 100%;
            position: relative;
        }
        
        * {
            margin: 0;
            padding: 0;
        }
        
        li {
            list-style: none;
        }
        
        #app {
            margin-top: 35px;
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        
        #app .ori {
            position: relative;
            width: 360px;
            height: 718px;
            background: url(./images/1.png);
            background-size: 100%;
        }
        
        #app .new-img {
            position: relative;
            width: 360px;
            /* background: url(./images/5.png); */
            background-size: 100%;
        }
        
        .new-img img {
            position: absolute;
            transform: scale(0.5);
            top: -50%;
            left: -50%;
            vertical-align: top;
        }
        
        .new-img span {
            position: absolute;
        }
        
        .username {
            top: 385px;
            right: 32px;
            font-size: 13px;
        }
        
        .mile {
            color: #57525d;
            font-size: 46px;
            font-family: 'keeprun';
            transform: scale(1.15, 0.95);
            transform-origin: 0 0;
        }
        
        .mile-par {
            top: 387px;
            right: 315px;
            letter-spacing: -4px;
        }
        
        .mile-poi {
            top: 386px;
            left: 61px;
        }
        
        .datetime {
            color: #a2a2a2;
            font-size: 13px;
            font-family: "Segoe UI", Arial, Helvetica, sans-serif;
        }
        .day {
            top: 407px;
            left: 278px;
        }
        
        .mounth {
            top: 407px;
            left: 259.5px;
        }
        
        .hour {
            top: 407px;
            left: 296px;
        }
        
        .min {
            top: 407px;
            left: 315px;
        }
        
        .env {
            color: #a2a2a2;
            font-size: 13px;
            font-family: "Segoe UI", Arial, Helvetica, sans-serif;;
            transform: scale(1.05, 1);
            letter-spacing: -0.5px;
        }
        .temperature {
            top: 427px;
            right: 95px;
        }
        
        .humidity {
            top: 427px;
            right: 44px;
        }
        
        .speed {
            color: #58505b;
            font-size: 27px;
            font-family: 'keeprun';
            transform: scale(1.15, 0.95);
        }
        
        .spe-min {
            top: 480px;
            left: 31px;
        }
        
        .spe-sec {
            top: 480px;
            left: 60px;
            letter-spacing: -1px;
        }
        
        .cost-hour {
            top: 480px;
            left: 139.5px;
        }
        
        .cost-min {
            top: 480px;
            left: 168px;
        }
        
        .cost-sec {
            top: 480px;
            left: 199px;
        }
        
        .calorie {
            top: 479.5px;
            right: 33px;
        }
        
        .set-data {
            width: 250px;
        }
        
        input {
            width: 55px;
            height: 24px;
            padding-left: 5px;
            border-radius: 5px;
            border: 1px solid #038957;
            vertical-align: middle;
        }
        
         :focus-visible {
            outline: #15b77b auto 1px;
        }
        
        .username-inp {
            width: 125px;
        }
        
        .img-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            font-size: 18px;
            transform: translateX(-50%);
        }
        
        .time-inp {
            width: 20px;
            margin-left: 4px;
            margin-right: 1px;
        }
        
        .save-btn {
            width: 180px;
            height: 50px;
            background-color: #24c68a;
            color: #fff;
            border-radius: 26px;
            line-height: 36px;
            border: 2px solid #c5e4a4;
            font-size: 20px;
        }
        
        .set-data h4 {
            font-size: 24px;
            font-weight: normal;
            color: #24c68a;
        }
        
        .setDataList li {
            margin-top: 15px;
        }
        
        .setDataList label {
            color: #24c68a;
        }
        
        input[type="radio"] {
            width: 20px;
            margin: 8px 12px;
        }
        
        .warn {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            color: red;
        }
    </style>
    <script src="./vue.js"></script>
</head>

<body>
    <div id="app">
        <div class="warn">
            <div class="warntext">本网页仅供交流学习，切勿用于一切违法用途，违者后果自负！</div>
        </div>
        <div ref="newImg" class="new-img" :style="`height:${imgHeight}px;`">
            <img src="images/1.png">
            <span class="username" id="username">UserName</span>
            <span class="mile mile-par" id="mile-par">0</span>
            <span class="mile mile-poi" id="mile-poi">00</span>
            <span class="datetime month" id="date-month">00</span>
            <span class="datetime day" id="date-day">00</span>
            <span class="datetime hour" id="time-hour">00</span>
            <span class="datetime min" id="time-min">00</span>
            <span class="env temperature" id="temperature">21</span>
            <span class="env humidity" id="humidity">65</span>
            <span class="speed spe-min" id="spe-min">00</span>
            <span class="speed spe-sec" id="spe-sec">00</span>
            <span class="speed cost-hour" id="cost-hour">00</span>
            <span class="speed cost-min" id="cost-min">00</span>
            <span class="speed cost-sec" id="cost-sec">00</span>
            <span class="speed calorie" id="calorie">0</span>
            <span class="img-text">生成图片参考</span>
        </div>
        <div class="set-data">
            <h4>数据设置</h4>
            <ul class="setDataList">
                <li>
                    <label for="username">用户名：</label>
                    <input v-model="username" id="username" type="text" placeholder="学号姓名" class="username-inp"></li>
                <li>
                    <label for="miles">公里：</label> <input v-model.number="miles" type="number" min="0" max="20" id="miles" class="mile2-inp">
                </li>
                <li>
                    <label for="speeds">配速：</label> <input v-model.number="speeds" id="speeds" type="text" placeholder="例如5.26">
                </li>
                <li>
                    <label>时间：</label> <input v-model.number="month" type="text" class="time-inp">月<input v-model.number="day" type="text" class="time-inp">日<input v-model.number="hour" type="text" class="time-inp">时<input v-model.number="min" type="text"
                        class="time-inp">分
                </li>
                <li>
                    <label for="temperature">温度：</label><input v-model.number="temperature" id="temperature" type="text">
                </li>
                <li>
                    <label for="humidity">湿度：</label><input v-model.number="humidity" type="text">
                </li>
                <li>
                    <label>选择图片模板：</label> <br>
                    <input type="radio" name="imgSet" id="first" value="2" v-model.number="imgIndex" checked><label for="first">模板一</label>
                    <br>
                    <input type="radio" name="imgSet" id="second" value="3" v-model.number="imgIndex"><label for="second">模板二</label>
                    <br>
                    <input type="radio" name="imgSet" id="third" value="4" v-model.number="imgIndex"><label for="third">模板三</label>
                    <br>
                    <input type="radio" name="imgSet" id="forth" value="5" v-model.number="imgIndex"><label for="forth">模板四</label></li>
                <li><button @click="handleDownload" class="save-btn">保存图片</button></li>
            </ul>


        </div>

    </div>
    <script src="./html2canvas.min.js"></script>
    <script type="text/javascript">
        function fract(num) {
            return num - Math.trunc(num);
        }
        
        function addZero(i) {
            if (i < 10) {
                i = "0" + String(i);
                return i;
                }
            return String(i);
            }
        
        
		function rander() {
		    let miles_int = Math.floor(miles);
            let miles_dec = Math.round((miles - miles_int) * 100);
            let speeds_int = Math.floor(speeds);
            let speeds_dec = Math.round((speeds - speeds_int) * 100);
		    let times = (speeds_dec / 60 + speeds_int) * miles;
            let timeInc = Math.trunc(times);
            let cost_hour = Math.floor(timeInc / 60);
            let cost_min = timeInc % 60;
            let cost_sec = Math.round((times - timeInc) * 60);
            let calorie = Math.round(69 * miles * 1.036);
		    
		    document.getElementById("mile-par").innerHTML = miles_int;
		    document.getElementById("mile-poi").innerHTML = miles_dec;
		    document.getElementById("date-month").innerHTML = date_month;
		    document.getElementById("date-day").innerHTML = date_day;
		    document.getElementById("time-hour").innerHTML = time_hour;
		    document.getElementById("time-min").innerHTML = time_min;
		    document.getElementById("temperature").innerHTML = temperature;
		    document.getElementById("humidity").innerHTML = humidity;
		    document.getElementById("username").innerHTML = username;
		    document.getElementById("spe-min").innerHTML = speeds_int;
		    document.getElementById("spe-sec").innerHTML = speeds_dec;
		    document.getElementById("cost-hour").innerHTML = cost_hour;
		    document.getElementById("cost-min").innerHTML = cost_min;
		    document.getElementById("cost-sec").innerHTML = cost_sec;
		    document.getElementById("calorie").innerHTML = calorie;
		    
		}

        
        window.onload = function() {
            document.getElementById("username").innerHTML = "az";
            var miles = 4;
            var speeds = 5;
            var datetime_now = new Date();
            var date_year = datetime_now.getFullYear();
            var date_month = datetime_now.getMonth();
            var date_day = datetime_now.getDate();
            var time_hour = datetime_now.getHours();
            var time_min = datetime_now.getMinutes();
            
            var username = "UserName";
            var humidity = 69;
            var temperature = 21;
            
            rander();
            
            
        }
    </script>
</body>

</html>